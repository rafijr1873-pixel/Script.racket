--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘     RACKET RIVALS SCRIPT v2.0        â•‘
    â•‘     Features: Hitbox, AutoHit,       â•‘
    â•‘     ESP, Speed, Auto Position        â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Toggle GUI: Right Click / Key "P"
]]

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SERVICES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local VirtualInputManager = game:GetService("VirtualInputManager")

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CONFIGURATION / SETTINGS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Config = {
    -- Hitbox
    HitboxEnabled = false,
    HitboxSize = 20,
    HitboxTransparency = 0.7,
    HitboxColor = Color3.fromRGB(255, 0, 0),
    
    -- Auto Hit
    AutoHitEnabled = false,
    AutoHitRange = 30,
    AutoSwing = false,
    
    -- ESP
    BallESP = false,
    PlayerESP = false,
    BallPrediction = false,
    
    -- Movement
    SpeedEnabled = false,
    SpeedValue = 60,
    JumpPowerEnabled = false,
    JumpPowerValue = 80,
    InfiniteJump = false,
    NoclipEnabled = false,
    
    -- Auto Position
    AutoPosition = false,
    AutoServe = false,
    
    -- Court
    CourtSide = "Auto",
    
    -- Misc
    AntiAFK = true,
    FPSUnlock = false,
}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- VARIABLES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Connections = {}
local ESPObjects = {}
local HitboxParts = {}
local BallPredictionPart = nil
local OriginalWalkSpeed = 16
local OriginalJumpPower = 50
local GUIVisible = true
local ScriptEnabled = true

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UTILITY FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function Notify(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title or "Racket Rivals",
            Text = text or "",
            Duration = duration or 3,
        })
    end)
end

local function GetCharacter()
    return LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
end

local function GetHumanoid()
    local char = GetCharacter()
    return char and char:FindFirstChildOfClass("Humanoid")
end

local function GetHRP()
    local char = GetCharacter()
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function GetBall()
    -- Cari bola di workspace
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            local name = obj.Name:lower()
            if name:find("ball") or name:find("shuttle") or 
               name:find("birdie") or name:find("projectile") then
                return obj
            end
        end
    end
    
    -- Cari di folder khusus
    local folders = {"Balls", "GameItems", "Court", "Game", "Assets"}
    for _, folderName in pairs(folders) do
        local folder = Workspace:FindFirstChild(folderName)
        if folder then
            for _, obj in pairs(folder:GetDescendants()) do
                if obj:IsA("BasePart") then
                    return obj
                end
            end
        end
    end
    
    return nil
end

local function GetRacket()
    local char = GetCharacter()
    if not char then return nil end
    
    for _, obj in pairs(char:GetDescendants()) do
        if obj:IsA("BasePart") or obj:IsA("MeshPart") then
            local name = obj.Name:lower()
            if name:find("racket") or name:find("bat") or 
               name:find("paddle") or name:find("handle") or
               name:find("tool") then
                return obj
            end
        end
    end
    
    -- Check tools
    for _, tool in pairs(char:GetChildren()) do
        if tool:IsA("Tool") then
            return tool:FindFirstChildWhichIsA("BasePart", true)
        end
    end
    
    return nil
end

local function GetAllBalls()
    local balls = {}
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            local name = obj.Name:lower()
            if name:find("ball") or name:find("shuttle") or
               name:find("birdie") or name:find("projectile") then
                table.insert(balls, obj)
            end
        end
    end
    return balls
end

local function DistanceTo(part)
    local hrp = GetHRP()
    if hrp and part then
        return (hrp.Position - part.Position).Magnitude
    end
    return math.huge
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GUI CREATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function CreateGUI()
    -- Destroy existing GUI
    local existingGui = LocalPlayer.PlayerGui:FindFirstChild("RacketRivalsGUI")
    if existingGui then existingGui:Destroy() end
    
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "RacketRivalsGUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Protect GUI
    pcall(function()
        if syn and syn.protect_gui then
            syn.protect_gui(ScreenGui)
        elseif gethui then
            ScreenGui.Parent = gethui()
            return
        end
    end)
    ScreenGui.Parent = LocalPlayer.PlayerGui
    
    -- â•â•â• MAIN FRAME â•â•â•
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 420, 0, 520)
    MainFrame.Position = UDim2.new(0.5, -210, 0.5, -260)
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = ScreenGui
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 10)
    MainCorner.Parent = MainFrame
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Color = Color3.fromRGB(100, 50, 255)
    MainStroke.Thickness = 2
    MainStroke.Transparency = 0.3
    MainStroke.Parent = MainFrame
    
    -- Shadow
    local Shadow = Instance.new("ImageLabel")
    Shadow.Name = "Shadow"
    Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
    Shadow.BackgroundTransparency = 1
    Shadow.Position = UDim2.new(0.5, 0, 0.5, 4)
    Shadow.Size = UDim2.new(1, 30, 1, 30)
    Shadow.ZIndex = -1
    Shadow.Image = "rbxassetid://6014261993"
    Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    Shadow.ImageTransparency = 0.5
    Shadow.ScaleType = Enum.ScaleType.Slice
    Shadow.SliceCenter = Rect.new(49, 49, 450, 450)
    Shadow.Parent = MainFrame
    
    -- â•â•â• TITLE BAR â•â•â•
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Size = UDim2.new(1, 0, 0, 45)
    TitleBar.BackgroundColor3 = Color3.fromRGB(20, 10, 40)
    TitleBar.BorderSizePixel = 0
    TitleBar.Parent = MainFrame
    
    local TitleCorner = Instance.new("UICorner")
    TitleCorner.CornerRadius = UDim.new(0, 10)
    TitleCorner.Parent = TitleBar
    
    -- Fix bottom corners of title bar
    local TitleFix = Instance.new("Frame")
    TitleFix.Size = UDim2.new(1, 0, 0, 15)
    TitleFix.Position = UDim2.new(0, 0, 1, -15)
    TitleFix.BackgroundColor3 = Color3.fromRGB(20, 10, 40)
    TitleFix.BorderSizePixel = 0
    TitleFix.Parent = TitleBar
    
    local TitleGradient = Instance.new("UIGradient")
    TitleGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(120, 40, 255)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(200, 50, 200)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 80, 120)),
    })
    TitleGradient.Parent = TitleBar
    
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Name = "Title"
    TitleLabel.Size = UDim2.new(1, -50, 1, 0)
    TitleLabel.Position = UDim2.new(0, 15, 0, 0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = "ğŸ¸ RACKET RIVALS v2.0"
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.TextSize = 18
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = TitleBar
    
    -- Close Button
    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Name = "CloseBtn"
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.Position = UDim2.new(1, -38, 0, 7)
    CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    CloseBtn.Text = "âœ•"
    CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseBtn.TextSize = 14
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.BorderSizePixel = 0
    CloseBtn.Parent = TitleBar
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 6)
    CloseCorner.Parent = CloseBtn
    
    -- Minimize Button
    local MinBtn = Instance.new("TextButton")
    MinBtn.Name = "MinBtn"
    MinBtn.Size = UDim2.new(0, 30, 0, 30)
    MinBtn.Position = UDim2.new(1, -72, 0, 7)
    MinBtn.BackgroundColor3 = Color3.fromRGB(255, 180, 0)
    MinBtn.Text = "â”€"
    MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinBtn.TextSize = 14
    MinBtn.Font = Enum.Font.GothamBold
    MinBtn.BorderSizePixel = 0
    MinBtn.Parent = TitleBar
    
    local MinCorner = Instance.new("UICorner")
    MinCorner.CornerRadius = UDim.new(0, 6)
    MinCorner.Parent = MinBtn
    
    -- â•â•â• TAB BUTTONS â•â•â•
    local TabBar = Instance.new("Frame")
    TabBar.Name = "TabBar"
    TabBar.Size = UDim2.new(1, -20, 0, 35)
    TabBar.Position = UDim2.new(0, 10, 0, 50)
    TabBar.BackgroundColor3 = Color3.fromRGB(25, 20, 45)
    TabBar.BorderSizePixel = 0
    TabBar.Parent = MainFrame
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 8)
    TabCorner.Parent = TabBar
    
    local TabLayout = Instance.new("UIListLayout")
    TabLayout.FillDirection = Enum.FillDirection.Horizontal
    TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabLayout.Padding = UDim.new(0, 5)
    TabLayout.Parent = TabBar
    
    local TabPadding = Instance.new("UIPadding")
    TabPadding.PaddingLeft = UDim.new(0, 5)
    TabPadding.PaddingRight = UDim.new(0, 5)
    TabPadding.PaddingTop = UDim.new(0, 4)
    TabPadding.Parent = TabBar
    
    local tabNames = {"âš” Combat", "ğŸ‘ ESP", "ğŸƒ Movement", "âš™ Misc"}
    local TabButtons = {}
    local TabContents = {}
    local ActiveTab = 1
    
    for i, name in ipairs(tabNames) do
        local tabBtn = Instance.new("TextButton")
        tabBtn.Name = "Tab" .. i
        tabBtn.Size = UDim2.new(0, 92, 0, 27)
        tabBtn.BackgroundColor3 = i == 1 and Color3.fromRGB(100, 50, 255) or Color3.fromRGB(35, 30, 55)
        tabBtn.Text = name
        tabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabBtn.TextSize = 11
        tabBtn.Font = Enum.Font.GothamSemibold
        tabBtn.BorderSizePixel = 0
        tabBtn.LayoutOrder = i
        tabBtn.Parent = TabBar
        
        local btnCorner = Instance.new("UICorner")
        btnCorner.CornerRadius = UDim.new(0, 6)
        btnCorner.Parent = tabBtn
        
        TabButtons[i] = tabBtn
        
        -- Tab Content Frame
        local content = Instance.new("ScrollingFrame")
        content.Name = "Content" .. i
        content.Size = UDim2.new(1, -20, 1, -100)
        content.Position = UDim2.new(0, 10, 0, 92)
        content.BackgroundColor3 = Color3.fromRGB(20, 15, 35)
        content.BorderSizePixel = 0
        content.ScrollBarThickness = 4
        content.ScrollBarImageColor3 = Color3.fromRGB(100, 50, 255)
        content.CanvasSize = UDim2.new(0, 0, 0, 0)
        content.AutomaticCanvasSize = Enum.AutomaticSize.Y
        content.Visible = (i == 1)
        content.Parent = MainFrame
        
        local cCorner = Instance.new("UICorner")
        cCorner.CornerRadius = UDim.new(0, 8)
        cCorner.Parent = content
        
        local cLayout = Instance.new("UIListLayout")
        cLayout.SortOrder = Enum.SortOrder.LayoutOrder
        cLayout.Padding = UDim.new(0, 6)
        cLayout.Parent = content
        
        local cPadding = Instance.new("UIPadding")
        cPadding.PaddingLeft = UDim.new(0, 8)
        cPadding.PaddingRight = UDim.new(0, 8)
        cPadding.PaddingTop = UDim.new(0, 8)
        cPadding.PaddingBottom = UDim.new(0, 8)
        cPadding.Parent = content
        
        TabContents[i] = content
    end
    
    -- Tab switching
    local function SwitchTab(index)
        ActiveTab = index
        for i, btn in pairs(TabButtons) do
            btn.BackgroundColor3 = (i == index) and Color3.fromRGB(100, 50, 255) or Color3.fromRGB(35, 30, 55)
            TabContents[i].Visible = (i == index)
        end
    end
    
    for i, btn in pairs(TabButtons) do
        btn.MouseButton1Click:Connect(function()
            SwitchTab(i)
        end)
    end
    
    -- â•â•â• UI ELEMENT CREATORS â•â•â•
    local function CreateToggle(parent, text, default, callback, order)
        local toggleFrame = Instance.new("Frame")
        toggleFrame.Name = "Toggle_" .. text
        toggleFrame.Size = UDim2.new(1, 0, 0, 36)
        toggleFrame.BackgroundColor3 = Color3.fromRGB(30, 25, 50)
        toggleFrame.BorderSizePixel = 0
        toggleFrame.LayoutOrder = order or 0
        toggleFrame.Parent = parent
        
        local tCorner = Instance.new("UICorner")
        tCorner.CornerRadius = UDim.new(0, 8)
        tCorner.Parent = toggleFrame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -60, 1, 0)
        label.Position = UDim2.new(0, 12, 0, 0)
        label.BackgroundTransparency = 1
        label.Text = text
        label.TextColor3 = Color3.fromRGB(220, 220, 230)
        label.TextSize = 13
        label.Font = Enum.Font.GothamMedium
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = toggleFrame
        
        local toggleBtn = Instance.new("Frame")
        toggleBtn.Size = UDim2.new(0, 44, 0, 22)
        toggleBtn.Position = UDim2.new(1, -54, 0.5, -11)
        toggleBtn.BackgroundColor3 = default and Color3.fromRGB(100, 50, 255) or Color3.fromRGB(60, 55, 80)
        toggleBtn.BorderSizePixel = 0
        toggleBtn.Parent = toggleFrame
        
        local toggleCorner = Instance.new("UICorner")
        toggleCorner.CornerRadius = UDim.new(1, 0)
        toggleCorner.Parent = toggleBtn
        
        local circle = Instance.new("Frame")
        circle.Size = UDim2.new(0, 18, 0, 18)
        circle.Position = default and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
        circle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        circle.BorderSizePixel = 0
        circle.Parent = toggleBtn
        
        local circleCorner = Instance.new("UICorner")
        circleCorner.CornerRadius = UDim.new(1, 0)
        circleCorner.Parent = circle
        
        local enabled = default
        
        local clickBtn = Instance.new("TextButton")
        clickBtn.Size = UDim2.new(1, 0, 1, 0)
        clickBtn.BackgroundTransparency = 1
        clickBtn.Text = ""
        clickBtn.Parent = toggleFrame
        
        clickBtn.MouseButton1Click:Connect(function()
            enabled = not enabled
            
            TweenService:Create(toggleBtn, TweenInfo.new(0.2), {
                BackgroundColor3 = enabled and Color3.fromRGB(100, 50, 255) or Color3.fromRGB(60, 55, 80)
            }):Play()
            
            TweenService:Create(circle, TweenInfo.new(0.2, Enum.EasingStyle.Back), {
                Position = enabled and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
            }):Play()
            
            if callback then
                callback(enabled)
            end
        end)
        
        return {
            Frame = toggleFrame,
            SetValue = function(val)
                enabled = val
                TweenService:Create(toggleBtn, TweenInfo.new(0.2), {
                    BackgroundColor3 = enabled and Color3.fromRGB(100, 50, 255) or Color3.fromRGB(60, 55, 80)
                }):Play()
                TweenService:Create(circle, TweenInfo.new(0.2), {
                    Position = enabled and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
                }):Play()
            end
        }
    end
    
    local function CreateSlider(parent, text, min, max, default, callback, order)
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Name = "Slider_" .. text
        sliderFrame.Size = UDim2.new(1, 0, 0, 55)
        sliderFrame.BackgroundColor3 = Color3.fromRGB(30, 25, 50)
        sliderFrame.BorderSizePixel = 0
        sliderFrame.LayoutOrder = order or 0
        sliderFrame.Parent = parent
        
        local sCorner = Instance.new("UICorner")
        sCorner.CornerRadius = UDim.new(0, 8)
        sCorner.Parent = sliderFrame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -70, 0, 22)
        label.Position = UDim2.new(0, 12, 0, 4)
        label.BackgroundTransparency = 1
        label.Text = text
        label.TextColor3 = Color3.fromRGB(220, 220, 230)
        label.TextSize = 13
        label.Font = Enum.Font.GothamMedium
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = sliderFrame
        
        local valueLabel = Instance.new("TextLabel")
        valueLabel.Size = UDim2.new(0, 50, 0, 22)
        valueLabel.Position = UDim2.new(1, -60, 0, 4)
        valueLabel.BackgroundTransparency = 1
        valueLabel.Text = tostring(default)
        valueLabel.TextColor3 = Color3.fromRGB(100, 180, 255)
        valueLabel.TextSize = 13
        valueLabel.Font = Enum.Font.GothamBold
        valueLabel.TextXAlignment = Enum.TextXAlignment.Right
        valueLabel.Parent = sliderFrame
        
        local sliderBG = Instance.new("Frame")
        sliderBG.Size = UDim2.new(1, -24, 0, 8)
        sliderBG.Position = UDim2.new(0, 12, 0, 34)
        sliderBG.BackgroundColor3 = Color3.fromRGB(45, 40, 65)
        sliderBG.BorderSizePixel = 0
        sliderBG.Parent = sliderFrame
        
        local bgCorner = Instance.new("UICorner")
        bgCorner.CornerRadius = UDim.new(1, 0)
        bgCorner.Parent = sliderBG
        
        local fill = Instance.new("Frame")
        fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
        fill.BackgroundColor3 = Color3.fromRGB(100, 50, 255)
        fill.BorderSizePixel = 0
        fill.Parent = sliderBG
        
        local fillCorner = Instance.new("UICorner")
        fillCorner.CornerRadius = UDim.new(1, 0)
        fillCorner.Parent = fill
        
        local knob = Instance.new("Frame")
        knob.Size = UDim2.new(0, 16, 0, 16)
        knob.Position = UDim2.new((default - min) / (max - min), -8, 0.5, -8)
        knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        knob.BorderSizePixel = 0
        knob.ZIndex = 2
        knob.Parent = sliderBG
        
        local knobCorner = Instance.new("UICorner")
        knobCorner.CornerRadius = UDim.new(1, 0)
        knobCorner.Parent = knob
        
        local dragging = false
        
        local inputBtn = Instance.new("TextButton")
        inputBtn.Size = UDim2.new(1, 0, 0, 20)
        inputBtn.Position = UDim2.new(0, 0, 0, 26)
        inputBtn.BackgroundTransparency = 1
        inputBtn.Text = ""
        inputBtn.Parent = sliderFrame
        
        local function UpdateSlider(input)
            local pos = UDim2.new(0, 12, 0, 34)
            local absPos = sliderBG.AbsolutePosition.X
            local absSize = sliderBG.AbsoluteSize.X
            
            local mouseX = input.Position.X
            local relative = math.clamp((mouseX - absPos) / absSize, 0, 1)
            
            local value = math.floor(min + (max - min) * relative)
            valueLabel.Text = tostring(value)
            
            fill.Size = UDim2.new(relative, 0, 1, 0)
            knob.Position = UDim2.new(relative, -8, 0.5, -8)
            
            if callback then
                callback(value)
            end
        end
        
        inputBtn.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or
               input.UserInputType == Enum.UserInputType.Touch then
                dragging = true
                UpdateSlider(input)
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or
               input.UserInputType == Enum.UserInputType.Touch) then
                UpdateSlider(input)
            end
        end)
        
        UserInputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or
               input.UserInputType == Enum.UserInputType.Touch then
                dragging = false
            end
        end)
        
        return sliderFrame
    end
    
    local function CreateSectionLabel(parent, text, order)
        local label = Instance.new("TextLabel")
        label.Name = "Section_" .. text
        label.Size = UDim2.new(1, 0, 0, 25)
        label.BackgroundTransparency = 1
        label.Text = "â”€â”€ " .. text .. " â”€â”€"
        label.TextColor3 = Color3.fromRGB(150, 100, 255)
        label.TextSize = 12
        label.Font = Enum.Font.GothamBold
        label.LayoutOrder = order or 0
        label.Parent = parent
        return label
    end
    
    local function CreateButton(parent, text, callback, order)
        local btn = Instance.new("TextButton")
        btn.Name = "Btn_" .. text
        btn.Size = UDim2.new(1, 0, 0, 34)
        btn.BackgroundColor3 = Color3.fromRGB(80, 40, 200)
        btn.Text = text
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.TextSize = 13
        btn.Font = Enum.Font.GothamSemibold
        btn.BorderSizePixel = 0
        btn.LayoutOrder = order or 0
        btn.Parent = parent
        
        local bCorner = Instance.new("UICorner")
        bCorner.CornerRadius = UDim.new(0, 8)
        bCorner.Parent = btn
        
        btn.MouseEnter:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.15), {
                BackgroundColor3 = Color3.fromRGB(110, 60, 240)
            }):Play()
        end)
        
        btn.MouseLeave:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.15), {
                BackgroundColor3 = Color3.fromRGB(80, 40, 200)
            }):Play()
        end)
        
        btn.MouseButton1Click:Connect(function()
            if callback then callback() end
        end)
        
        return btn
    end
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- TAB 1: COMBAT
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    local combatTab = TabContents[1]
    
    CreateSectionLabel(combatTab, "HITBOX EXPANDER", 1)
    
    CreateToggle(combatTab, "ğŸ¯ Hitbox Expander", false, function(val)
        Config.HitboxEnabled = val
        Notify("Hitbox", val and "Hitbox Expander ON" or "Hitbox Expander OFF")
    end, 2)
    
    CreateSlider(combatTab, "Hitbox Size", 5, 50, 20, function(val)
        Config.HitboxSize = val
    end, 3)
    
    CreateSlider(combatTab, "Hitbox Transparency", 0, 10, 7, function(val)
        Config.HitboxTransparency = val / 10
    end, 4)
    
    CreateSectionLabel(combatTab, "AUTO HIT", 5)
    
    CreateToggle(combatTab, "âš¡ Auto Hit", false, function(val)
        Config.AutoHitEnabled = val
        Notify("Auto Hit", val and "Auto Hit ON" or "Auto Hit OFF")
    end, 6)
    
    CreateToggle(combatTab, "ğŸ”„ Auto Swing", false, function(val)
        Config.AutoSwing = val
    end, 7)
    
    CreateSlider(combatTab, "Auto Hit Range", 10, 60, 30, function(val)
        Config.AutoHitRange = val
    end, 8)
    
    CreateToggle(combatTab, "ğŸ¾ Auto Serve", false, function(val)
        Config.AutoServe = val
        Notify("Auto Serve", val and "Auto Serve ON" or "Auto Serve OFF")
    end, 9)
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- TAB 2: ESP
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    local espTab = TabContents[2]
    
    CreateSectionLabel(espTab, "ESP FEATURES", 1)
    
    CreateToggle(espTab, "ğŸŸ¢ Ball ESP", false, function(val)
        Config.BallESP = val
        Notify("ESP", val and "Ball ESP ON" or "Ball ESP OFF")
    end, 2)
    
    CreateToggle(espTab, "ğŸ”µ Player ESP", false, function(val)
        Config.PlayerESP = val
        Notify("ESP", val and "Player ESP ON" or "Player ESP OFF")
    end, 3)
    
    CreateToggle(espTab, "ğŸ“ Ball Prediction", false, function(val)
        Config.BallPrediction = val
        Notify("Prediction", val and "Ball Prediction ON" or "Ball Prediction OFF")
    end, 4)
    
    CreateSectionLabel(espTab, "ESP SETTINGS", 5)
    
    CreateButton(espTab, "ğŸ—‘ï¸ Clear All ESP", function()
        for _, obj in pairs(ESPObjects) do
            if obj and obj.Parent then
                obj:Destroy()
            end
        end
        ESPObjects = {}
        Notify("ESP", "All ESP cleared")
    end, 6)
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- TAB 3: MOVEMENT
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    local moveTab = TabContents[3]
    
    CreateSectionLabel(moveTab, "SPEED & JUMP", 1)
    
    CreateToggle(moveTab, "ğŸ’¨ Speed Boost", false, function(val)
        Config.SpeedEnabled = val
        local hum = GetHumanoid()
        if hum then
            if val then
                OriginalWalkSpeed = hum.WalkSpeed
                hum.WalkSpeed = Config.SpeedValue
            else
                hum.WalkSpeed = OriginalWalkSpeed
            end
        end
        Notify("Speed", val and "Speed Boost ON" or "Speed Boost OFF")
    end, 2)
    
    CreateSlider(moveTab, "Speed Value", 16, 200, 60, function(val)
        Config.SpeedValue = val
        if Config.SpeedEnabled then
            local hum = GetHumanoid()
            if hum then hum.WalkSpeed = val end
        end
    end, 3)
    
    CreateToggle(moveTab, "â¬†ï¸ Jump Power Boost", false, function(val)
        Config.JumpPowerEnabled = val
        local hum = GetHumanoid()
        if hum then
            if val then
                OriginalJumpPower = hum.JumpPower
                hum.JumpPower = Config.JumpPowerValue
            else
                hum.JumpPower = OriginalJumpPower
            end
        end
    end, 4)
    
    CreateSlider(moveTab, "Jump Power Value", 50, 300, 80, function(val)
        Config.JumpPowerValue = val
        if Config.JumpPowerEnabled then
            local hum = GetHumanoid()
            if hum then hum.JumpPower = val end
        end
    end, 5)
    
    CreateSectionLabel(moveTab, "SPECIAL MOVEMENT", 6)
    
    CreateToggle(moveTab, "â™¾ï¸ Infinite Jump", false, function(val)
        Config.InfiniteJump = val
        Notify("Jump", val and "Infinite Jump ON" or "Infinite Jump OFF")
    end, 7)
    
    CreateToggle(moveTab, "ğŸ‘» Noclip", false, function(val)
        Config.NoclipEnabled = val
        Notify("Noclip", val and "Noclip ON" or "Noclip OFF")
    end, 8)
    
    CreateToggle(moveTab, "ğŸ¯ Auto Position (Ball Magnet)", false, function(val)
        Config.AutoPosition = val
        Notify("Position", val and "Auto Position ON" or "Auto Position OFF")
    end, 9)
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- TAB 4: MISC
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    local miscTab = TabContents[4]
    
    CreateSectionLabel(miscTab, "MISCELLANEOUS", 1)
    
    CreateToggle(miscTab, "ğŸš« Anti AFK", true, function(val)
        Config.AntiAFK = val
        Notify("Anti AFK", val and "Anti AFK ON" or "Anti AFK OFF")
    end, 2)
    
    CreateToggle(miscTab, "ğŸ® FPS Unlocker", false, function(val)
        Config.FPSUnlock = val
        if val then
            pcall(function()
                setfpscap(999)
            end)
        else
            pcall(function()
                setfpscap(60)
            end)
        end
        Notify("FPS", val and "FPS Unlocked" or "FPS Locked to 60")
    end, 3)
    
    CreateSectionLabel(miscTab, "GAME ACTIONS", 4)
    
    CreateButton(miscTab, "ğŸ”ƒ Rejoin Server", function()
        Notify("Rejoin", "Rejoining server...")
        task.wait(1)
        pcall(function()
            game:GetService("TeleportService"):TeleportToPlaceInstance(
                game.PlaceId, game.JobId, LocalPlayer
            )
        end)
    end, 5)
    
    CreateButton(miscTab, "ğŸŒ Server Hop", function()
        Notify("Server Hop", "Finding new server...")
        pcall(function()
            local Http = game:GetService("HttpService")
            local TPS = game:GetService("TeleportService")
            local url = "https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?sortOrder=Asc&limit=100"
            local data = Http:JSONDecode(game:HttpGet(url))
            for _, server in pairs(data.data) do
                if server.id ~= game.JobId and server.playing < server.maxPlayers then
                    TPS:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
                    break
                end
            end
        end)
    end, 6)
    
    CreateButton(miscTab, "âŒ Destroy Script", function()
        ScriptEnabled = false
        for _, conn in pairs(Connections) do
            pcall(function() conn:Disconnect() end)
        end
        for _, obj in pairs(ESPObjects) do
            pcall(function() obj:Destroy() end)
        end
        for _, obj in pairs(HitboxParts) do
            pcall(function() obj:Destroy() end)
        end
        if BallPredictionPart then
            pcall(function() BallPredictionPart:Destroy() end)
        end
        ScreenGui:Destroy()
        Notify("Script", "Script destroyed!")
    end, 7)
    
    CreateSectionLabel(miscTab, "INFO", 8)
    
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, 0, 0, 60)
    infoLabel.BackgroundColor3 = Color3.fromRGB(30, 25, 50)
    infoLabel.Text = "Press 'P' to toggle GUI\nRight Click to toggle GUI\nScript by: Claude AI"
    infoLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
    infoLabel.TextSize = 11
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.TextWrapped = true
    infoLabel.LayoutOrder = 9
    infoLabel.BorderSizePixel = 0
    infoLabel.Parent = miscTab
    
    local iCorner = Instance.new("UICorner")
    iCorner.CornerRadius = UDim.new(0, 8)
    iCorner.Parent = infoLabel
    
    -- â•â•â• CLOSE/MINIMIZE HANDLERS â•â•â•
    CloseBtn.MouseButton1Click:Connect(function()
        GUIVisible = false
        MainFrame.Visible = false
    end)
    
    local minimized = false
    MinBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        if minimized then
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
                Size = UDim2.new(0, 420, 0, 50)
            }):Play()
        else
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Size = UDim2.new(0, 420, 0, 520)
            }):Play()
        end
    end)
    
    return ScreenGui, MainFrame
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CORE FEATURES IMPLEMENTATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â•â•â• HITBOX EXPANDER â•â•â•
local function RunHitbox()
    Connections.Hitbox = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        if not Config.HitboxEnabled then
            -- Cleanup hitbox parts
            for _, part in pairs(HitboxParts) do
                pcall(function()
                    if part and part.Parent then
                        part.Size = Vector3.new(1, 1, 1)
                    end
                end)
            end
            HitboxParts = {}
            return
        end
        
        -- Expand racket hitbox
        local racket = GetRacket()
        if racket and racket:IsA("BasePart") then
            racket.Size = Vector3.new(Config.HitboxSize, Config.HitboxSize, Config.HitboxSize)
            racket.Transparency = Config.HitboxTransparency
            racket.Color = Config.HitboxColor
            racket.CanCollide = false
            
            if not table.find(HitboxParts, racket) then
                table.insert(HitboxParts, racket)
            end
        end
        
        -- Expand character hitbox parts
        local char = GetCharacter()
        if char then
            for _, part in pairs(char:GetChildren()) do
                if part:IsA("BasePart") and (part.Name == "UpperTorso" or 
                   part.Name == "Torso" or part.Name == "HumanoidRootPart") then
                    -- Jangan expand terlalu besar agar tidak terdeteksi
                end
            end
            
            -- Cari tool/racket dan expand
            for _, tool in pairs(char:GetChildren()) do
                if tool:IsA("Tool") then
                    for _, part in pairs(tool:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.Size = Vector3.new(
                                Config.HitboxSize, 
                                Config.HitboxSize, 
                                Config.HitboxSize
                            )
                            part.Transparency = Config.HitboxTransparency
                            part.CanCollide = false
                            part.Color = Config.HitboxColor
                            
                            if not table.find(HitboxParts, part) then
                                table.insert(HitboxParts, part)
                            end
                        end
                    end
                end
            end
        end
    end)
end

-- â•â•â• AUTO HIT â•â•â•
local function RunAutoHit()
    Connections.AutoHit = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        if not Config.AutoHitEnabled then return end
        
        local ball = GetBall()
        if not ball then return end
        
        local hrp = GetHRP()
        if not hrp then return end
        
        local distance = (hrp.Position - ball.Position).Magnitude
        
        if distance <= Config.AutoHitRange then
            -- Auto swing / click
            if Config.AutoSwing then
                pcall(function()
                    -- Method 1: Fire click
                    VirtualInputManager:SendMouseButtonEvent(
                        Camera.ViewportSize.X / 2,
                        Camera.ViewportSize.Y / 2,
                        0, true, game, 1
                    )
                    task.wait(0.05)
                    VirtualInputManager:SendMouseButtonEvent(
                        Camera.ViewportSize.X / 2,
                        Camera.ViewportSize.Y / 2,
                        0, false, game, 1
                    )
                end)
                
                -- Method 2: Fire remote events
                pcall(function()
                    for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                        if remote:IsA("RemoteEvent") then
                            local name = remote.Name:lower()
                            if name:find("hit") or name:find("swing") or 
                               name:find("attack") or name:find("racket") or
                               name:find("smash") or name:find("shot") then
                                remote:FireServer(ball.Position)
                            end
                        end
                    end
                end)
                
                -- Method 3: Mouse click simulation
                pcall(function()
                    mouse1click()
                end)
            end
        end
    end)
end

-- â•â•â• AUTO POSITION â•â•â•
local function RunAutoPosition()
    Connections.AutoPosition = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        if not Config.AutoPosition then return end
        
        local ball = GetBall()
        if not ball then return end
        
        local hrp = GetHRP()
        if not hrp then return end
        
        local ballPos = ball.Position
        local ballVelocity = ball.Velocity
        
        -- Predict where ball will be
        local predictedPos = ballPos + ballVelocity * 0.15
        
        -- Move towards predicted position (keep Y the same)
        local targetPos = Vector3.new(
            predictedPos.X,
            hrp.Position.Y,
            predictedPos.Z
        )
        
        local distance = (hrp.Position - targetPos).Magnitude
        
        if distance > 3 and distance < 80 then
            -- Smooth movement towards ball
            local direction = (targetPos - hrp.Position).Unit
            hrp.CFrame = hrp.CFrame + direction * math.min(distance * 0.3, 2)
        end
    end)
end

-- â•â•â• BALL ESP â•â•â•
local function CreateBallESP(ball)
    if not ball or not ball:IsA("BasePart") then return end
    
    -- Billboard GUI for Ball
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "BallESP"
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.Adornee = ball
    billboard.Parent = ball
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = "ğŸŸ¢ BALL"
    nameLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
    nameLabel.TextSize = 16
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextStrokeTransparency = 0.5
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.Parent = billboard
    
    local distLabel = Instance.new("TextLabel")
    distLabel.Size = UDim2.new(1, 0, 0.5, 0)
    distLabel.Position = UDim2.new(0, 0, 0.5, 0)
    distLabel.BackgroundTransparency = 1
    distLabel.Text = "0 studs"
    distLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
    distLabel.TextSize = 12
    distLabel.Font = Enum.Font.GothamSemibold
    distLabel.TextStrokeTransparency = 0.5
    distLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    distLabel.Parent = billboard
    
    -- Highlight
    local highlight = Instance.new("Highlight")
    highlight.Name = "BallHighlight"
    highlight.FillColor = Color3.fromRGB(0, 255, 100)
    highlight.FillTransparency = 0.5
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = ball
    
    table.insert(ESPObjects, billboard)
    table.insert(ESPObjects, highlight)
    
    return billboard, distLabel
end

local function RunBallESP()
    Connections.BallESP = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        
        if Config.BallESP then
            local balls = GetAllBalls()
            for _, ball in pairs(balls) do
                if ball and ball.Parent then
                    -- Check if ESP already exists
                    if not ball:FindFirstChild("BallESP") then
                        local billboard, distLabel = CreateBallESP(ball)
                        
                        -- Update distance
                        if distLabel then
                            task.spawn(function()
                                while ball and ball.Parent and Config.BallESP and ScriptEnabled do
                                    local dist = DistanceTo(ball)
                                    distLabel.Text = string.format("%.1f studs", dist)
                                    
                                    -- Color based on distance
                                    if dist < 15 then
                                        distLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
                                    elseif dist < 30 then
                                        distLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
                                    else
                                        distLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
                                    end
                                    
                                    task.wait(0.1)
                                end
                            end)
                        end
                    end
                end
            end
        else
            -- Clean up ball ESP
            for _, ball in pairs(GetAllBalls()) do
                local esp = ball:FindFirstChild("BallESP")
                if esp then esp:Destroy() end
                local hl = ball:FindFirstChild("BallHighlight")
                if hl then hl:Destroy() end
            end
        end
    end)
end

-- â•â•â• PLAYER ESP â•â•â•
local function CreatePlayerESP(player)
    if player == LocalPlayer then return end
    
    local char = player.Character
    if not char then return end
    
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    -- Check if already has ESP
    if char:FindFirstChild("PlayerESP") then return end
    
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "PlayerESP"
    billboard.Size = UDim2.new(0, 200, 0, 60)
    billboard.StudsOffset = Vector3.new(0, 4, 0)
    billboard.AlwaysOnTop = true
    billboard.Adornee = hrp
    billboard.Parent = char
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.4, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = "ğŸ”µ " .. player.Name
    nameLabel.TextColor3 = Color3.fromRGB(85, 170, 255)
    nameLabel.TextSize = 14
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextStrokeTransparency = 0.5
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.Parent = billboard
    
    local distLabel = Instance.new("TextLabel")
    distLabel.Name = "DistLabel"
    distLabel.Size = UDim2.new(1, 0, 0.3, 0)
    distLabel.Position = UDim2.new(0, 0, 0.4, 0)
    distLabel.BackgroundTransparency = 1
    distLabel.Text = "0 studs"
    distLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    distLabel.TextSize = 11
    distLabel.Font = Enum.Font.Gotham
    distLabel.TextStrokeTransparency = 0.5
    distLabel.Parent = billboard
    
    -- Health bar background
    local healthBG = Instance.new("Frame")
    healthBG.Size = UDim2.new(0.6, 0, 0, 6)
    healthBG.Position = UDim2.new(0.2, 0, 0.75, 0)
    healthBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    healthBG.BorderSizePixel = 0
    healthBG.Parent = billboard
    
    local hbCorner = Instance.new("UICorner")
    hbCorner.CornerRadius = UDim.new(1, 0)
    hbCorner.Parent = healthBG
    
    local healthFill = Instance.new("Frame")
    healthFill.Name = "HealthFill"
    healthFill.Size = UDim2.new(1, 0, 1, 0)
    healthFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    healthFill.BorderSizePixel = 0
    healthFill.Parent = healthBG
    
    local hfCorner = Instance.new("UICorner")
    hfCorner.CornerRadius = UDim.new(1, 0)
    hfCorner.Parent = healthFill
    
    -- Highlight
    local highlight = Instance.new("Highlight")
    highlight.Name = "PlayerHighlight"
    highlight.FillColor = Color3.fromRGB(85, 170, 255)
    highlight.FillTransparency = 0.7
    highlight.OutlineColor = Color3.fromRGB(85, 170, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = char
    
    table.insert(ESPObjects, billboard)
    table.insert(ESPObjects, highlight)
    
    -- Update loop
    task.spawn(function()
        while char and char.Parent and Config.PlayerESP and ScriptEnabled do
            local myHRP = GetHRP()
            if myHRP and hrp and hrp.Parent then
                local dist = (myHRP.Position - hrp.Position).Magnitude
                distLabel.Text = string.format("%.1f studs", dist)
            end
            
            local hum = char:FindFirstChildOfClass("Humanoid")
            if hum then
                healthFill.Size = UDim2.new(hum.Health / hum.MaxHealth, 0, 1, 0)
                
                local healthPct = hum.Health / hum.MaxHealth
                if healthPct > 0.5 then
                    healthFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                elseif healthPct > 0.25 then
                    healthFill.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
                else
                    healthFill.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                end
            end
            
            task.wait(0.2)
        end
    end)
end

local function RunPlayerESP()
    Connections.PlayerESP = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        
        if Config.PlayerESP then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character then
                    CreatePlayerESP(player)
                end
            end
        else
            -- Clean up
            for _, player in pairs(Players:GetPlayers()) do
                if player.Character then
                    local esp = player.Character:FindFirstChild("PlayerESP")
                    if esp then esp:Destroy() end
                    local hl = player.Character:FindFirstChild("PlayerHighlight")
                    if hl then hl:Destroy() end
                end
            end
        end
    end)
end

-- â•â•â• BALL PREDICTION â•â•â•
local function RunBallPrediction()
    -- Create prediction marker
    BallPredictionPart = Instance.new("Part")
    BallPredictionPart.Name = "BallPrediction"
    BallPredictionPart.Size = Vector3.new(3, 0.2, 3)
    BallPredictionPart.Shape = Enum.PartType.Cylinder
    BallPredictionPart.Color = Color3.fromRGB(255, 255, 0)
    BallPredictionPart.Material = Enum.Material.Neon
    BallPredictionPart.Transparency = 0.3
    BallPredictionPart.Anchored = true
    BallPredictionPart.CanCollide = false
    BallPredictionPart.CastShadow = false
    BallPredictionPart.Parent = Workspace
    
    local predictionBillboard = Instance.new("BillboardGui")
    predictionBillboard.Size = UDim2.new(0, 100, 0, 30)
    predictionBillboard.StudsOffset = Vector3.new(0, 2, 0)
    predictionBillboard.AlwaysOnTop = true
    predictionBillboard.Parent = BallPredictionPart
    
    local predLabel = Instance.new("TextLabel")
    predLabel.Size = UDim2.new(1, 0, 1, 0)
    predLabel.BackgroundTransparency = 1
    predLabel.Text = "ğŸ“ LANDING"
    predLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    predLabel.TextSize = 14
    predLabel.Font = Enum.Font.GothamBold
    predLabel.TextStrokeTransparency = 0.5
    predLabel.Parent = predictionBillboard
    
    Connections.BallPrediction = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        
        if Config.BallPrediction and BallPredictionPart then
            local ball = GetBall()
            if ball then
                local pos = ball.Position
                local vel = ball.Velocity
                local gravity = Vector3.new(0, -Workspace.Gravity, 0)
                
                -- Simple trajectory prediction
                local t = 0
                local predictedPos = pos
                local dt = 0.05
                local tempVel = vel
                
                for i = 1, 60 do
                    t = t + dt
                    tempVel = tempVel + gravity * dt
                    predictedPos = predictedPos + tempVel * dt
                    
                    -- If below ground level (roughly)
                    if predictedPos.Y <= 1 then
                        predictedPos = Vector3.new(predictedPos.X, 1, predictedPos.Z)
                        break
                    end
                end
                
                BallPredictionPart.Position = predictedPos
                BallPredictionPart.Transparency = 0.3
                
                -- Pulsing effect
                local pulse = math.abs(math.sin(tick() * 3))
                BallPredictionPart.Size = Vector3.new(3 + pulse, 0.2, 3 + pulse)
            else
                BallPredictionPart.Transparency = 1
            end
        else
            if BallPredictionPart then
                BallPredictionPart.Transparency = 1
            end
        end
    end)
end

-- â•â•â• INFINITE JUMP â•â•â•
local function RunInfiniteJump()
    Connections.InfJump = UserInputService.JumpRequest:Connect(function()
        if not ScriptEnabled then return end
        if not Config.InfiniteJump then return end
        
        local hum = GetHumanoid()
        if hum then
            hum:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end)
end

-- â•â•â• NOCLIP â•â•â•
local function RunNoclip()
    Connections.Noclip = RunService.Stepped:Connect(function()
        if not ScriptEnabled then return end
        if not Config.NoclipEnabled then return end
        
        local char = GetCharacter()
        if char then
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end)
end

-- â•â•â• SPEED UPDATER â•â•â•
local function RunSpeedUpdater()
    Connections.Speed = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        
        if Config.SpeedEnabled then
            local hum = GetHumanoid()
            if hum then
                hum.WalkSpeed = Config.SpeedValue
            end
        end
        
        if Config.JumpPowerEnabled then
            local hum = GetHumanoid()
            if hum then
                hum.JumpPower = Config.JumpPowerValue
                hum.UseJumpPower = true
            end
        end
    end)
end

-- â•â•â• AUTO SERVE â•â•â•
local function RunAutoServe()
    Connections.AutoServe = RunService.Heartbeat:Connect(function()
        if not ScriptEnabled then return end
        if not Config.AutoServe then return end
        
        pcall(function()
            for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                if remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction") then
                    local name = remote.Name:lower()
                    if name:find("serve") or name:find("start") or 
                       name:find("launch") or name:find("throw") then
                        if remote:IsA("RemoteEvent") then
                            remote:FireServer()
                        elseif remote:IsA("RemoteFunction") then
                            pcall(function() remote:InvokeServer() end)
                        end
                    end
                end
            end
        end)
        
        task.wait(0.5) -- Prevent spam
    end)
end

-- â•â•â• ANTI AFK â•â•â•
local function RunAntiAFK()
    Connections.AntiAFK = LocalPlayer.Idled:Connect(function()
        if Config.AntiAFK then
            pcall(function()
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Space, false, game)
                task.wait(0.1)
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Space, false, game)
            end)
        end
    end)
end

-- â•â•â• REMOTE SPY (Bonus Feature) â•â•â•
local function FindGameRemotes()
    local remotes = {}
    for _, obj in pairs(ReplicatedStorage:GetDescendants()) do
        if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
            table.insert(remotes, {
                Name = obj.Name,
                Type = obj.ClassName,
                Path = obj:GetFullName()
            })
        end
    end
    
    print("\nâ•â•â• RACKET RIVALS REMOTES â•â•â•")
    for _, remote in pairs(remotes) do
        print(string.format("[%s] %s - %s", remote.Type, remote.Name, remote.Path))
    end
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n")
    
    return remotes
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GUI TOGGLE KEYBIND
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function SetupKeybinds()
    Connections.Keybind = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        -- Toggle GUI with P key
        if input.KeyCode == Enum.KeyCode.P then
            GUIVisible = not GUIVisible
            local gui = LocalPlayer.PlayerGui:FindFirstChild("RacketRivalsGUI")
            if gui then
                local main = gui:FindFirstChild("MainFrame")
                if main then
                    main.Visible = GUIVisible
                end
            end
        end
        
        -- Toggle GUI with Right Click
        if input.UserInputType == Enum.UserInputType.MouseButton2 then
            -- Optional: uncomment if you want right click toggle
            -- GUIVisible = not GUIVisible
        end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CHARACTER ADDED HANDLER
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function OnCharacterAdded(char)
    task.wait(1)
    
    -- Re-apply speed if enabled
    if Config.SpeedEnabled then
        local hum = char:WaitForChild("Humanoid", 5)
        if hum then
            hum.WalkSpeed = Config.SpeedValue
        end
    end
    
    if Config.JumpPowerEnabled then
        local hum = char:WaitForChild("Humanoid", 5)
        if hum then
            hum.JumpPower = Config.JumpPowerValue
        end
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- STATUS BAR (bottom of screen)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function CreateStatusBar()
    local gui = LocalPlayer.PlayerGui:FindFirstChild("RacketRivalsGUI")
    if not gui then return end
    
    local statusFrame = Instance.new("Frame")
    statusFrame.Name = "StatusBar"
    statusFrame.Size = UDim2.new(0, 300, 0, 30)
    statusFrame.Position = UDim2.new(0.5, -150, 1, -40)
    statusFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    statusFrame.BorderSizePixel = 0
    statusFrame.Parent = gui
    
    local sCorner = Instance.new("UICorner")
    sCorner.CornerRadius = UDim.new(0, 8)
    sCorner.Parent = statusFrame
    
    local sStroke = Instance.new("UIStroke")
    sStroke.Color = Color3.fromRGB(100, 50, 255)
    sStroke.Thickness = 1
    sStroke.Transparency = 0.5
    sStroke.Parent = statusFrame
    
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Name = "StatusText"
    statusLabel.Size = UDim2.new(1, -10, 1, 0)
    statusLabel.Position = UDim2.new(0, 5, 0, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "ğŸ¸ Racket Rivals Script Active"
    statusLabel.TextColor3 = Color3.fromRGB(150, 150, 200)
    statusLabel.TextSize = 11
    statusLabel.Font = Enum.Font.GothamMedium
    statusLabel.Parent = statusFrame
    
    -- Update status text
    task.spawn(function()
        while ScriptEnabled do
            local features = {}
            if Config.HitboxEnabled then table.insert(features, "HB") end
            if Config.AutoHitEnabled then table.insert(features, "AH") end
            if Config.BallESP then table.insert(features, "ESP") end
            if Config.SpeedEnabled then table.insert(features, "SPD") end
            if Config.AutoPosition then table.insert(features, "AP") end
            if Config.NoclipEnabled then table.insert(features, "NC") end
            
            local ball = GetBall()
            local ballDist = ball and string.format("%.0f", DistanceTo(ball)) or "N/A"
            
            local text = "ğŸ¸ Active: [" .. (#features > 0 and table.concat(features, "|") or "NONE") .. "]"
            text = text .. " | Ball: " .. ballDist .. "st"
            text = text .. " | FPS: " .. math.floor(1 / RunService.Heartbeat:Wait())
            
            statusLabel.Text = text
            task.wait(0.5)
        end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- INITIALIZATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function Initialize()
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("   RACKET RIVALS SCRIPT v2.0")
    print("   Loading...")
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    
    -- Create GUI
    CreateGUI()
    task.wait(0.5)
    
    -- Start all systems
    RunHitbox()
    RunAutoHit()
    RunAutoPosition()
    RunBallESP()
    RunPlayerESP()
    RunBallPrediction()
    RunInfiniteJump()
    RunNoclip()
    RunSpeedUpdater()
    RunAutoServe()
    RunAntiAFK()
    SetupKeybinds()
    CreateStatusBar()
    
    -- Character handler
    LocalPlayer.CharacterAdded:Connect(OnCharacterAdded)
    
    -- Find game remotes (debug)
    task.spawn(function()
        task.wait(2)
        FindGameRemotes()
    end)
    
    -- Welcome notification
    Notify("ğŸ¸ Racket Rivals", "Script loaded! Press P to toggle GUI", 5)
    
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("   Script Loaded Successfully!")
    print("   Press P to toggle GUI")
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
end

-- â•â•â• START â•â•â•
Initialize()
